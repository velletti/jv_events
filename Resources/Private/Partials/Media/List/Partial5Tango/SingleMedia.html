{namespace jve=JVelletti\JvEvents\ViewHelpers}
<f:spaceless>
    <div id="{divid}" class="jv-events-singleMedia {hideListClass}" data-uid="{media.uid}" data-teaserimage="{media.teaserImage.uid}"
         data-mediauid="{media.uid}"  data-orguid="{media.organizer.uid}"
           >

        <div class="card col-12 my-4 clearfix rounded-bottom">
            <div class="row">
                <div class="col-12  col-md-3 px-0">
                    <f:if condition="{settings.detailPid}">
                        <f:then>
                            <f:link.action pageUid="{settings.detailPid}" action="show" controller="Media" arguments="{media : media.uid}">
                                <f:render section="image" arguments="{_all}"></f:render>
                            </f:link.action>
                        </f:then>
                        <f:else>
                            <f:render section="image" arguments="{_all}"></f:render>
                        </f:else>
                    </f:if>
                </div>

                <div class="col-12 col-md-6  py-2">
                    <div class="card-block">
                        <div id="map-marker-content-{media.uid}">
                            <h4 class="card-title pb-0 mb-0">
                                <f:if condition="{settings.detailPid}">
                                    <f:then>
                                        <f:link.action  pageUid="{settings.detailPid}" action="show" controller="Media" arguments="{media : media.uid}" >
                                            {media.name}
                                        </f:link.action>

                                    </f:then>
                                    <f:else>
                                        {media.name}
                                    </f:else>
                                </f:if>
                            </h4>
                        </div>
                        <p>
                            {media.teaserText}
                        </p>



                    </div>
                </div>

                <div class="col-12 col-md-3 text-black-50 bg-gradient-light py-3">
                    <div class="pb-3">
                        <span class="fa fa-info-circle mh-sm"></span>
                        <f:format.date format="M/Y">{media.releaseDate}</f:format.date>
                        - <b>{media.organizer.name}</b>
                        <f:if condition="{media.link}">
                            <f:then>
                                <br>
                                <span class="fa fa-link mh-sm"></span> <f:link.external uri="{media.link}" target="_blank" title="External Link {media.link}"> <f:translate key="orderNow" default="Hier bestellen >>"></f:translate></f:link.external>
                                <br>
                            </f:then>
                        </f:if>
                    </div>
                    <div>
                        &nbsp;
                    </div>

                    <f:if condition="{settings.detailPid}">
                        <f:then>

                            <div class="position-absolute position-bottom position-right mr-0 w-100">
                                <div class="jv-events-btn-right">
                                    <f:link.action class="btn btn-sm btn-outline-secondary  w-100 text-right"  style="display: flex; justify-content: flex-end; align-items: center" pageUid="{settings.detailPid}" action="show" controller="Media" arguments="{media : media.uid}">
                                        <f:translate key="tx_jvevents_domain_model_media.showdetails" default="Details anzeigen"/> <span class="fa fa-chevron-right mh-sm my-2"></span>
                                    </f:link.action>
                                </div>

                            </div>
                        </f:then>
                        <f:else>
                            <div class="position-absolute position-bottom position-right mr-0">
                                <button class="btn btn-sm btn-outline-secondary" type="button" data-toggle="collapse" data-target="#organizerDetails-{media.uid}" aria-expanded="false" aria-controls="organizerDetails-{media.uid}">
                                    <span class="fa fa-caret-down mh-sm"></span> <f:translate key="tx_jvevents_domain_model_media.showdetails" default="Details anzeigen"/>
                                </button>
                            </div>
                        </f:else>
                    </f:if>
                </div>
                <f:if condition="{settings.showDetails}">
                    <div class="collapse" id="organizerDetails-{media.uid}">
                        <div class="col-12 offset-md-3 col-md-9  py-2 bg-gradient-light ">
                            <f:format.html>{media.description}</f:format.html>
                        </div>

                        <div class="col-4  col-md-3 px-0">
                            <f:render section="authorimage" arguments="{_all}"></f:render>
                        </div>
                        <div class="col-8 col-md-9 py-2">
                            <strong><f:translate key="tx_jvevents_domain_model_media.autor" default="Autor"/>:</strong> {media.organizer.name}

                            <f:if condition="{media.organizer.link}">
                                <br>
                                <f:link.external uri="{media.organizer.link}" target="_blank">{media.organizer.link}</f:link.external>
                            </f:if>
                            <hr>
                            <f:format.html>{media.organizer.description}</f:format.html>
                        </div>
                    </div>
                </f:if>
            </div>
        </div>
    </div>
</f:spaceless>

<f:section name="image">
    <f:if condition="{media.teaserImage.uid}">
        <f:then>
            <jve:image alt="{media.teaserImage.alternative}" class="d-block w-100 h-auto img-float rounded shadow-lg" maxHeight="{settings.list.image.height}" maxWidth="{settings.list.image.width}" src="{media.teaserImage.uid}" title="{media.teaserImage.title}" treatIdAsReference="true" width="{settings.list.image.width}c" />
        </f:then>
    </f:if>
</f:section>
<f:section name="authorimage">
    <f:if condition="{media.organizer.teaserImage.uid}">
        <f:then>
            <jve:image alt="{media.organizer.teaserImage.alternative}" class="d-block w-100 h-auto img-float rounded shadow-lg" maxHeight="{settings.list.image.height}" maxWidth="{settings.list.image.width}" src="{media.organizer.teaserImage.uid}" title="{media.organizer.teaserImage.title}" treatIdAsReference="true" width="{settings.list.image.width}c" />
        </f:then>
    </f:if>
</f:section>
