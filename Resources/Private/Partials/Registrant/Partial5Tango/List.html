{namespace jvt=Jve\JveTemplate\ViewHelpers}
<h1>Registrations  {event.startDate -> f:format.date(format:"d.m.Y")} - {event.name}</h1>

<f:flashMessages />


<f:if condition="{registrants}">
	<div class="text-right">
		<f:link.action action="list" class="btn btn-primary" noCache="1" noCacheHash="1" arguments="{event : event.uid, hash: hash, export: 1}"> CSV Export </f:link.action>
		<br />
		<br />
	</div>

	<table  class="table table-responsive table-bordered" >
		<tr>
			<th></th>
			<th><f:translate key="tx_jvevents_domain_model_registrant.first_name" /></th>
			<th><f:translate key="tx_jvevents_domain_model_registrant.last_name" /></th>
			<th><f:translate key="tx_jvevents_domain_model_registrant.email" /></th>
			<th><f:translate key="tx_jvevents_domain_model_registrant.phone" /></th>
			<th><f:translate key="tx_jvevents_domain_model_registrant.first_name" /></th>
			<th><f:translate key="tx_jvevents_domain_model_registrant.last_name" /></th>
			<th><f:translate key="tx_jvevents_domain_model_registrant.street_and_nr" /></th>
			<th><f:translate key="tx_jvevents_domain_model_registrant.zip" /></th>
			<th><f:translate key="tx_jvevents_domain_model_registrant.city" /></th>
		</tr>
		<f:variable name="regCount">0</f:variable>
		<f:variable name="regCountWait">0</f:variable>
		<f:for each="{registrants}" as="registrant">
			<tr>
				<td><f:if condition="{registrant.confirmed}"><f:then><i class="fa fa-check-circle text-success "> </i> </f:then><f:else><i class="fa fa-hourglass-start text-warning "> </i></f:else></f:if> </td>
				<td>{registrant.firstName}</td>
				<td>{registrant.lastName}</td>
				<td><i class="fa fa-envelope  mr-2"></i><f:link.email email="{registrant.email}">{registrant.email}</f:link.email></td>
				<td><i class="fa fa-phone mr-2"></i><f:link.external uri="tel:{registrant.phone}">{registrant.phone}</f:link.external> </td>
				<td>{registrant.more2}</td>
				<td>{registrant.more3}</td>
				<td>{registrant.streetAndNr}</td>
				<td>{registrant.zip}</td>
				<td>{registrant.city}</td>
			</tr>
			<f:if condition="{registrant.confirmed}">
				<f:then>
					<f:if condition="{registrant.more2} || {registrant.more3}">
						<f:then><f:variable name="regCount">{regCount + 2}</f:variable></f:then>
						<f:else><f:variable name="regCount">{regCount + 1}</f:variable></f:else>
					</f:if>
				</f:then>

				<f:else>
					<f:if condition="{registrant.more2} || {registrant.more3}">
						<f:then><f:variable name="regCountWait">{regCountWait + 2}</f:variable></f:then>
						<f:else><f:variable name="regCountWait">{regCountWait + 1}</f:variable></f:else>
					</f:if>
				</f:else>
			</f:if>
		</f:for>
	</table>
	<hr>
	<b><f:translate key="registrations" default="Anmeldungen" />: {regCount} <f:if condition="{regCountWait}"> <span title="{f:translate(key:'tx_jvevents_domain_model_event.available_waiting_seats' , default:'')}"> (+ {regCountWait} <span class="d-none d-sm-inline-block">{f:translate(key:'tx_jvevents_domain_model_event.available_waiting_seats' , default:'')}</span> ) </span></f:if> </b>

</f:if>