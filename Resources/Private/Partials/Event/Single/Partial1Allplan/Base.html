{namespace event=JVE\JvEvents\ViewHelpers}

<f:comment>
	<!-- =========================================================================================================================== -->
	<!-- Main infos -->
	<!-- =========================================================================================================================== -->
</f:comment>

<h1 data-eventUid="{event.uid}">{event.name}</h1>

<div class="eventdata">

	<div class="row">
		<div class="col-md-2"><strong><f:translate key="tx_jvevents_domain_model_event.date" />:</strong></div>
		<div class="col-md-10">{event.startDate -> f:format.date(format:"d.m.Y")}</div>
	</div>

	<f:if condition="{event.allDay}">
		<f:else>
			<div class="row">
				<div class="col-md-2"><strong><f:translate key="tx_jvevents_domain_model_event.time" />:</strong></div>
				<div class="col-md-10">{event.startTime -> event:format.date( format:"H:i")}<f:if condition="{event.endTime}"> - {event.endTime -> event:format.date( format:"H:i")}</f:if></div>
			</div>
		</f:else>
	</f:if>

	<!-- =============================================================================================================================== -->
	<hr>
	<!-- =============================================================================================================================== -->

	<f:if condition="{event.location.name}">
		<div class="row">
			<div class="col-md-2"><strong><f:translate key="tx_jvevents_domain_model_location.name" />:</strong></div>
			<div class="col-md-10">{event.location.name}</div>
		</div>
	</f:if>

	<f:if condition="{event.location.city}">
		<div class="row">
			<div class="col-md-2"><strong><f:translate key="tx_jvevents_domain_model_location.street_and_nr" />:</strong></div>
			<div class="col-md-10">
				<f:if condition="{event.location.streetAndNr}">
					{event.location.streetAndNr}<br>
				</f:if>
				<f:if condition="{event.location.city}">
					{event.location.zip} {event.location.city}
				</f:if>
			</div>
		</div>
	</f:if>

	<!-- =============================================================================================================================== -->
	<hr>
	<!-- =============================================================================================================================== -->

	<f:if condition="{event.EventCategory}">
		<div class="row">
			<div class="col-md-2"><strong><f:translate key="tx_jvevents_domain_model_category" />:</strong></div>
			<div class="col-md-10">
				<f:for each="{event.EventCategory}" as="EventCategory" iteration="iteration"><f:if condition="{iteration.index} > 0 ">, </f:if>{EventCategory.title}</f:for>
			</div>
		</div>
	</f:if>

	<f:if condition="{event.Tags}">
		<div class="row">
			<div class="col-md-2"><strong><f:translate key="tx_jvevents_domain_model_event.tags" />:</strong></div>
			<div class="col-md-10">
				<f:for each="{event.Tags}" as="Tag" iteration="iteration"><f:if condition="{iteration.index} > 0 ">, </f:if>{Tag.name}</f:for>
			</div>
		</div>
	</f:if>


	<f:if condition="{event.isRegistrationPossible}">
		<event:regLink event="{event}" settings="{settings}" uriOnly="0" class="button-orange-filled">
			{f:translate(key:'LLL:EXT:jv_events/Resources/Private/Language/locallang.xlf:list.register.button.subscribe' , default:'Anmelden')}
		</event:regLink>
	</f:if>


</div>


<f:comment>
	<!-- =========================================================================================================================== -->
	<!-- Tab-nav -->
	<!-- =========================================================================================================================== -->
</f:comment>

<ul class="nav nav-tabs">
	<li class="active">
		<a href="#jv_events_event" data-toggle="tab"><f:translate key="tx_jvevents_domain_model_event.details.tab.details" /></a>
	</li>
	<li>
		<a href="#jv_events_map" data-toggle="tab"><f:translate key="tx_jvevents_domain_model_event.details.tab.map" /></a>
	</li>
	<li>
		<a href="#jv_events_contact" data-toggle="tab"><f:translate key="tx_jvevents_domain_model_event.details.tab.contact" /></a>
	</li>

</ul>


<f:comment>
	<!-- =========================================================================================================================== -->
	<!-- Details -->
	<!-- =========================================================================================================================== -->
</f:comment>


<div class="tab-content clearfix">
	<div class="tab-pane active" id="jv_events_event">

		<h2><f:translate key="tx_jvevents_domain_model_event.details.tab.details" /></h2>

		<div class="data clearfix">
			<f:format.html parseFuncTSPath="lib.jveventsRTE">{event.description}</f:format.html>
		</div>

		<f:if condition="{event.files}">
			<div class="row row-fluid">
				<f:for each="{event.files}" as="file" >

					<div class="col-md-2">
						{file.originalResource.size -> f:format.bytes()}
					</div>
					<div class="col-md-10">
						<a href="{file.originalResource.publicUrl -> f:format.htmlspecialchars()}" target="_blank">
							{f:if(condition:file.originalResource.title, then:file.originalResource.title, else:file.originalResource.name)}
						</a>
					</div>

				</f:for>
			</div>
		</f:if>

	</div>


	<f:comment>
		<!-- =========================================================================================================================== -->
		<!-- Map -->
		<!-- =========================================================================================================================== -->
	</f:comment>
	<f:if condition="{event.location.lng}">
		<div class="tab-pane " id="jv_events_map" >
			<h2><f:translate key="tx_jvevents_domain_model_event.details.tab.map" /></h2>
			<f:render partial="GoogleMapsAllplan" arguments="{addresses: {0:event.location}, settings:settings}" />
		</div>
	</f:if>


	<f:comment>
		<!-- =========================================================================================================================== -->
		<!-- Contact -->
		<!-- =========================================================================================================================== -->
	</f:comment>
	<div class="tab-pane" id="jv_events_contact">

		<h2><f:translate key="tx_jvevents_domain_model_event.details.tab.contact" /></h2>

		<f:if condition="{event.organizer.name}">
			<div class="row">
				<div class="col-md-2"><strong><f:translate key="tx_jvevents_domain_model_organizer.name" />:</strong></div>
				<div class="col-md-10">{event.organizer.name}</div>
			</div>
		</f:if>

		<f:if condition="{event.organizer.email}">
			<div class="row">
				<div class="col-md-2"><strong><f:translate key="tx_jvevents_domain_model_organizer.email" />:</strong></div>
				<div class="col-md-10">{event.organizer.email}</div>
			</div>
		</f:if>

		<f:if condition="{event.organizer.phone}">
			<div class="row">
				<div class="col-md-2"><strong><f:translate key="tx_jvevents_domain_model_organizer.phone" />:</strong></div>
				<div class="col-md-10">{event.organizer.phone}</div>
			</div>
		</f:if>

	</div>

	<div class="tab-pane" id="jv_events_debug">
		<f:if condition="{settings.debug} > 0">
			<f:render partial="Event/Single/MicroFormat" arguments="{event: event, settings: settings}"/>
		</f:if>
	</div>

</div>


<script type="application/ld+json">
	<f:render partial="Event/Single/MicroFormat" arguments="{event: event, settings: settings}"/>
</script>