{namespace event=JVE\JvEvents\ViewHelpers}

<ul class="nav nav-tabs">
	<li class="active"><a id="jv_events_event_nav" data-toggle="tab" href="#jv_events_event">Info</a></li>
	<li ><a  id="jv_events_map_nav" data-toggle="tab" href="#jv_events_map">Map</a></li>
	<li ><a  id="jv_events_contact_nav" data-toggle="tab" href="#jv_events_contact">Kontakt</a></li>
	<f:if condition="{settings.debug} > 0">
		<li ><a  id="jv_events_debug_nav" data-toggle="tab" href="#jv_events_debug">debug</a></li>
	</f:if>
</ul>
<div class="tab-content clearfix " style="min-height:550px;">
	<div class="tab-pane active " id="jv_events_event">
		<div class="well">
			<f:render partial="Event/Single/Partial{settings.LayoutSingle}/Row"
				arguments="{title: '', translate: '0', isHeadline: 'H2' ,value: '{event.name}' }" />

			<div class="row">
				<div class="col-sm-4">
					<f:translate key="tx_jvevents_domain_model_event.date" />
				</div>
				<div class="col-sm-8">
					<b>
						<f:if condition="{event.allDay}">
							<f:then>
								{event.startDate -> f:format.date(format:"d.m.Y")}
							</f:then>
							<f:else>
								{event.startDate -> f:format.date(format:"d.m.Y")} um {event.startTime -> f:format.date( format:"H:i")}<f:if condition="{event.endTime}"> - {event.endTime -> f:format.date( format:"H:i")}</f:if>
							</f:else>
						</f:if>
					</b>
				</div>
			</div>

			<f:render partial="Event/Single/Partial{settings.LayoutSingle}/Row"
				arguments="{title: 'tx_jvevents_domain_model_location.name', translate: '1', value: '{event.location.name}' }"/>

			<div class="row">
				<div class="col-sm-4">

				</div>
				<div class="col-sm-8" >
					<f:if condition="{event.location.streetAndNr}">
						{event.location.streetAndNr}<br/>
					</f:if>
					<f:if condition="{event.location.city}">
						{event.location.zip} {event.location.city}<br/>
					</f:if>
				</div>

			</div>

			<f:if condition="{event.EventCategory}">
				<br/>
				<div class="row">
					<div class="col-sm-4">
						<f:translate key="tx_jvevents_domain_model_category.name" />
					</div>
					<div class="col-sm-8">
						<f:for each="{event.EventCategory}" as="EventCategory" iteration="iteration">
							<f:if condition="{iteration.index} > 0 ">, </f:if>
							{EventCategory.title}
						</f:for>
					</div>
				</div>
			</f:if>
		</div>
		<f:if condition="{event.isRegistrationPossible}">
			<div class="row">
				<div class="col-xs-12 text-right">
					<event:regLink event="{event}" settings="{settings}" uriOnly="0">
						<span class="btn btn-primary">
							{f:translate(key:'LLL:EXT:jv_events/Resources/Private/Language/locallang.xlf:list.register.button.subscribe' , default:'Anmelden')}
						</span>
					</event:regLink>
				</div>

			</div>

		</f:if>
		<div class="row clearfix">
			&nbsp;
		</div>
		<div class="well" >
			<f:format.html parseFuncTSPath="lib.jveventsRTE">
				{event.description}
			</f:format.html>
			<hr />

		</div>
		<f:if condition="{event.files}">
			<div class="row row-fluid">
				<f:for each="{event.files}" as="file" >
					<div class="col-sm-2">
						{file.originalResource.size -> f:format.bytes()}
					</div>
					<div class="col-sm-10">
						<a  defaultScheme="" href="{file.originalResource.publicUrl -> f:format.htmlspecialchars()}" target="_blank">
							{f:if(condition:file.originalResource.title, then:file.originalResource.title, else:file.originalResource.name)}
						</a>
						<div class="visible-xs" >&nbsp;</div>
					</div>

				</f:for>
			</div>
		</f:if>

	</div>
	<f:if condition="{event.location.lng}">
		<div class="tab-pane " id="jv_events_map" >
			<f:render partial="GoogleMaps" arguments="{addresses: {0:event.location}, settings:settings}" />
		</div>
	</f:if>
	<div class="tab-pane" id="jv_events_contact">

		<div class="well">
			<h2><f:translate key="tx_jvevents_domain_model_organizer" /></h2>

			<f:render partial="Event/Single/Partial{settings.LayoutSingle}/Row"
				arguments="{title: 'tx_jvevents_domain_model_organizer.name', translate: '1', value: '{event.organizer.name}' }"/>

			<f:render partial="Event/Single/Partial{settings.LayoutSingle}/Row"
				arguments="{title: 'tx_jvevents_domain_model_organizer.email', translate: '1', value: '{event.organizer.email}' }"/>
			<f:if condition="{event.organizer.phone}">
				<f:render partial="Event/Single/Partial{settings.LayoutSingle}/Row"
					arguments="{title: 'tx_jvevents_domain_model_organizer.phone', translate: '1', value: '{event.organizer.phone}' }"/>
			</f:if>

			<f:if condition="{event.isRegistrationPossible}">
				<div class="row">
					<div class="col-xs-12 text-right">
						<event:regLink event="{event}" settings="{settings}" uriOnly="0">
						<span class="btn btn-primary">
							{f:translate(key:'LLL:EXT:jv_events/Resources/Private/Language/locallang.xlf:list.register.button.subscribe' , default:'Anmelden')}
						</span>
						</event:regLink>
					</div>

				</div>

			</f:if>
		</div>
	</div>


	<div class="tab-pane" id="jv_events_debug">
		<f:if condition="{settings.debug} > 0">
			<f:render partial="Event/Single/MicroFormat" arguments="{event: event, settings: settings}"/>
		</f:if>
	</div>

</div>




	<script type="application/ld+json">
		<f:render partial="Event/Single/MicroFormat" arguments="{event: event, settings: settings}"/>
	</script>