{namespace jve=JVE\JvEvents\ViewHelpers}
{namespace vhs=FluidTYPO3\Vhs\ViewHelpers}

<div class="jv-events-singleEvent {f:if(condition: event.organizer.top, then:'jv_events-top-organizer')}" {jve:dataAttrib( event: event )}>
	<div class="list-item clearfix" data-comment="list-partial1allplan-singleEvent">


		<div class="data">
			<div style="font-weight: bold; margin-bottom: 15px;">
				<span class="day">{f:format.date(date:event.startDate, format:'d')}</span>
				<span class="month"><f:render section="month" arguments="{startDate: '{event.startDate}'}"/></span>
				<span class="year">{event.startDate -> f:format.date(format:"Y")}</span>
				| <span class="location7">{event.location.city}</span>

			</div>
			<div class="clearfix">
				<p class="title">
					<f:if condition="{event.url}">
						<f:then>
							<f:link.typolink class="internalLink" parameter="{event.url}">
								<strong>
									{event.name}
									<f:if condition="{event.organizer.name}">
										<br />({event.organizer.name}<f:if condition="{event.organizer.subname}"> - {event.organizer.subname}</f:if>)
									</f:if>
								</strong>
								<f:if condition="{event.teaser}">
									<br>
									{event.teaser}
								</f:if>

							</f:link.typolink>
						</f:then>
						<f:else>
							<f:link.action pageUid="{settings.detailPid}" action="show" noCacheHash="true" arguments="{event : event}">
								<strong>
									{event.name}
									<f:if condition="{event.organizer.name}">
										<br />({event.organizer.name}<f:if condition="{event.organizer.subname}"> - {event.organizer.subname}</f:if>)
									</f:if>
								</strong>
								<f:if condition="{event.teaser}">
									<br>
									{event.teaser}
								</f:if>
							</f:link.action>
						</f:else>
					</f:if>
				</p>
			</div>


			<f:if condition="{event.Tags}">
				<div style="width:20%;float:left;">
					<f:render section="tags" arguments="{tags: event.Tags, tagGroup: settings.filter.tagbox2headline}"></f:render>
				</div>
				<div style="width:20%;float:left;">
					<f:render section="tags" arguments="{tags: event.Tags, tagGroup: settings.filter.tagbox1headline}"></f:render>
				</div>
				<div style="width:20%;float:left;">
					<f:render section="tags" arguments="{tags: event.Tags, tagGroup: settings.filter.tagbox4headline}"></f:render>
				</div>

			</f:if>

			<div class="link">
				<p>
					<f:if condition="{event.url}">
						<f:then>
							<f:link.typolink class="internalLink" parameter="{event.url}" title="{f:translate(key: 'tx_jvevents_domain_model_event.details.linktext')}">
								&rarr;
							</f:link.typolink>
						</f:then>
						<f:else>
							<f:link.action class="internalLink" pageUid="{settings.detailPid}" noCacheHash="true" action="show" arguments="{event : event}"  title="{f:translate(key: 'tx_jvevents_domain_model_event.details.linktext')}">
								&rarr;
							</f:link.action>
						</f:else>
					</f:if>


				</p>
			</div>

		</div>


	</div>
</div>



<f:section name="tags">
	<f:variable name="output">false</f:variable>
	<f:for each="{tags}" as="Tag" iteration="iteration">
		<f:if condition="{Tag.visibility} < 2">
			<vhs:condition.string.contains haystack="{Tag.name}" needle="{tagGroup}">
				<f:if condition="{output}">
					<f:else>
						<f:variable name="output"><b>{tagGroup}</b>:<br></f:variable>
					</f:else>
				</f:if>

				<f:variable name="output">{output}{vhs:format.replace(content: '{Tag.name}',  substring: '{tagGroup}: ' , replacement: '' )}<br></f:variable>
			</vhs:condition.string.contains>

		</f:if>
	</f:for>
	<f:if condition="{output}">
		<f:then>
			{output}
		</f:then>
		<f:else>
			&nbsp;<br>
		</f:else>
	</f:if>
</f:section>

<f:section name="month">
	<f:switch expression="{f:format.date(date:startDate, format:'m')}">
		<f:case value="1">Januar</f:case>
		<f:case value="2">Februar</f:case>
		<f:case value="3">MÃ¤rz</f:case>
		<f:case value="4">April</f:case>
		<f:case value="5">Mai</f:case>
		<f:case value="6">Juni</f:case>
		<f:case value="7">Juli</f:case>
		<f:case value="8">August</f:case>
		<f:case value="9">September</f:case>
		<f:case value="10">Oktober</f:case>
		<f:case value="11">November</f:case>
		<f:case value="12">Dezember</f:case>

	</f:switch>
</f:section>